{% extends "index.html" %}
<!-- ЭТО КОД, ОТВЕЧАЮЩИЙ ЗА КРАСОТУ ДИАЛОГА -->
{% block content %}
<style>
    .custom-link {
        color: #e4ecfc;
        text-decoration: none;
        background-color: #57109e;
        padding: 6px;
        border-radius: 6px;
        transition: transform 0.3s, background-color 0.3s;
        font-size: 25px; /* Увеличен размер шрифта */
    }

    .custom-link:hover {
        color: #e4ecfc;
        background-color: #0ed3e1;
        transform: scale(1.1);
    }

    .link-container {
        margin-bottom: 32px; /*  расстояние между ссылками */
        display: flex; /*  для расположения элементов в ряд */
        align-items: center; /* Выравнивание по центру по вертикали */
    }


    .image-container {
        position: fixed;
        z-index: 10;
    }

    .image-container img {
        width: 300px; /* Задайте фиксированную ширину изображения */
        height: auto; /* Автоматически подстраивайте высоту */
    }

    .container {
        position: relative;
        z-index: 1;
    }

    .edit-button {
        margin-left: 20px; /* отступ справа от кнопки */
        cursor: pointer;
        padding: 10px; /* для увеличения размера кнопки */
        border: none;
        background-color: #0ed3e1;
        color: white;
        border-radius: 6px
    }
</style>

<div class="container">
    {% for i, j in tales %}
    <div class="link-container">
        <a class="custom-link" href="/tale/{{ i }}">{{ j }}</a>
        <button class="edit-button" onclick="editFunction('{{ i }}')">Изменить</button>
    </div>
    {% endfor %}
</div>

<div class="image-container" style="bottom: 50px; left: 1300px;">
    <img src="{{ url_for('static', filename='img/rocet.png') }}" alt="Image 2">
</div>


<div class="image-container" style="bottom: 20px; left: 10px;">
    <img src="{{ url_for('static', filename='img/cosmonavt.png') }}" alt="Image 2">
</div>


<!-- Второе изображение -->
<div class="image-container" style="top: 10px; left: 10px;">
    <img src="{{ url_for('static', filename='img/robi.png') }}" alt="Image 1" style="transform: scale(-1, -1); ">
</div>



<script>
    function editFunction(id) {
        // Находим ссылку по id
        var link = document.querySelector('.custom-link[href="/tale/' + id + '"]');

        // Создаем текстовое поле с текущим текстом ссылки
        var input = document.createElement('input');
        input.value = link.textContent;
        link.parentNode.replaceChild(input, link);
        input.focus();
        input.select();
        input.addEventListener('blur', function(event) {
            var newLink = document.createElement('a');
            newLink.href = link.href;
            newLink.textContent = input.value;
            newLink.className = 'custom-link';
            input.parentNode.replaceChild(newLink, input);
            fetch('/tales', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    id: id,
                    newText: input.value
                })
            });
            event.preventDefault();
        });
    }
</script>
{% endblock %}
