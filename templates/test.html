{% extends "index.html" %}
<!--ЭТО KОД, ОТВЕЧАЮЩИЙ ЗА КРАСОТУ ДИАЛОГА-->
{% block content %}
<meta charset="UTF-8">
<style>
    .container {
        display: flex;
        flex-direction: column;
        min-height: 0vh; /* Занимаем всю высоту экрана */
        width: 100%; /* Устанавливаем ширину элемента равной 70% от ширины экрана */
        margin: auto; /* Выравниваем элемент по центру */
    }

    .messages {
        flex: 1; /* Занимаем всю доступную высоту */
        overflow-y: auto; /* Добавляем прокрутку, если сообщений становится слишком много */
        padding: 20px;
        display: flex;
        flex-direction: column; /* Вывод сообщений снизу вверх */
        margin-bottom: 10vh; /* Добавляем отступ снизу */
    }

    .message {
        padding: 10px;
        border-radius: 10px;
        margin-bottom: 10px;
        display: flex; /* Добавлено */
        justify-content: flex-end; /* Добавлено */
        position: relative;
        flex-direction: column;

<!--        padding-bottom: 30px; /* Добавляем отступ снизу для текста сообщения */-->

    }

    .even {
        justify-content: flex-start; /* Добавлено */
    }



    .message .image-container {
        margin-left: 10px; /* Добавлено */
        margin-right: 10px; /* Добавлено */
    }

    .message:nth-child(even) {
        background-color: #87CEFA;
        text-align: lefy;
        margin-right: auto;
        margin-left: 0;
    }
    .message:nth-child(odd) {
        background-color: #f1f1f1;
        text-align: right;
        margin-left: auto;
        margin-right: 0;
    }

    .message-form {
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed; /* Фиксируем элемент относительно окна браузера */
        bottom: 3vh; /* Устанавливаем расстояние от нижней границы экрана равное 3% от его высоты */
        left: 15%; /* Устанавливаем левую границу элемента на 15% от левого края экрана */
        right: 15%; /* Устанавливаем правую границу элемента на 15% от правого края экрана */
        width: auto; /* Устанавливаем ширину элемента автоматически */
    }



    input[type="text"] {
        flex: 1; /* Занимаем доступное пространство */
        padding: 10px;
        border-radius: 20px;
        border: none;
        margin-right: 10px;
        height: 50px; /* Увеличиваем высоту текстового поля */
    }

    .styled {
        width: 120px;
        padding: 10px;
        border-radius: 20px;
        border: none;
        background-color: #007bff;
        color: white;
        cursor: pointer;
    }

    .sound-button {
    align-self: flex-start; /* Выравнивание кнопки по левому краю */
    order: 2; /* Помещение кнопки под текстом сообщения */
<!--        position: absolute;-->
<!--        bottom: 0;-->
<!--        left: 0;-->
<!--        margin-top: 10px; /* Добавляем отступ сверху для кнопки */-->

    }


</style>
<!--наше сообщение, те картинка + сообщене + голос(скоро)-->
<div class="container">
    <div class="messages" id="messages">
        <!-- Выводим сообщения в нормальном порядке -->
        <!-- Выводим сообщения в нормальном порядке -->

        {% for i in story_content %}
        <div class="message {% if loop.index is even %} even {% endif %}">
            {{ i }}
            {% if loop.index is even %}
            <div class="image-container" style="margin-bottom: 10px; text-align: center;">
                <img src="../static/img/image2.png" align="bottom">
            </div>
            <audio id="myAudio" controls>
                <source src="../static/voice acting files/voice_acting.mp3" type="audio/mpeg">
                Ваш браузер не поддерживает аудио элемент.
            </audio>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>


<form class="message-form" method="post" onsubmit="scrollToBottom()">
    <input type="text" id="story" name="story" placeholder="Введите сообщение...">
    <button class="styled" type="submit">Отправить</button>
</form>


<script>
    function scrollToBottom() {
        var messages = document.getElementById('messages');
        messages.scrollTop = messages.scrollHeight;
    }
</script>

<script>
    window.onload = function() {
        window.scrollTo(0, document.body.scrollHeight);
    }
</script>


{% endblock %}